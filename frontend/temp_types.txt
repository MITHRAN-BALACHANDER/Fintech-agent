/**
 * TypeScript types for the FinSIght Platform
 */

export type RiskProfile = "conservative" | "moderate" | "aggressive";
export type NotificationChannel = "email" | "sms" | "webhook";
export type AssetType = "stock" | "crypto";
export type RuleType = 
  | "price_above" 
  | "price_below" 
  | "momentum_positive" 
  | "momentum_negative"
  | "volume_spike"
  | "technical_signal";
export type ActionType = "notify_email" | "notify_sms" | "buy_trigger" | "sell_trigger";

export interface User {
  id: string;
  email: string;
  name: string;
  phone?: string;
  risk_profile: RiskProfile;
  preferred_channels: NotificationChannel[];
  agent_id: string;
  created_at: string;
  metadata?: Record<string, any>;
}

export interface UserCreate {
  email: string;
  name: string;
  password: string;
  phone?: string;
  risk_profile: RiskProfile;
  preferred_channels: NotificationChannel[];
}

export interface UserLogin {
  email: string;
  password: string;
}

export interface Watchlist {
  id: string;
  user_id: string;
  name: string;
  assets: string[];
  asset_type: AssetType;
  created_at: string;
}

export interface WatchlistCreate {
  name: string;
  assets: string[];
  asset_type: AssetType;
}

export interface TradingRule {
  id: string;
  user_id: string;
  name: string;
  description?: string;
  asset: string;
  asset_type: AssetType;
  rule_type: RuleType;
  condition: Record<string, any>;
  actions: ActionType[];
  priority: number;
  enabled: boolean;
  last_triggered?: string;
  created_at: string;
}

export interface RuleCreate {
  name: string;
  description?: string;
  asset: string;
  asset_type: AssetType;
  rule_type: RuleType;
  condition: Record<string, any>;
  actions: ActionType[];
  priority?: number;
}

export interface MarketData {
  symbol: string;
  price: number;
  change: number;
  change_percent: number;
  volume?: number;
  market_cap?: number;
  timestamp: string;
}

export interface ChatMessage {
  role: "user" | "assistant";
  content: string;
  timestamp: string;
}

export interface QueryRequest {
  message: string;
  stream?: boolean;
}

export interface QueryResponse {
  response: string;
  timestamp: string;
}

export interface PlatformStats {
  total_users: number;
  total_rules: number;
  total_trades: number;
  active_agents: number;
}

export interface TradeExecution {
  id: string;
  asset: string;
  action: string;
  quantity: number;
  price: number;
  status: string;
  created_at: string;
  executed_at?: string;
}

export interface RuleTrigger {
  id: string;
  name: string;
  asset: string;
  rule_type: string;
  last_triggered: string;
}

export interface UserStats {
  watchlists: number;
  total_rules: number;
  active_rules: number;
  total_trades: number;
  recent_trades: TradeExecution[];
  recent_rule_triggers: RuleTrigger[];
  agent_active: boolean;
}

export interface ApiResponse<T = any> {
  success: boolean;
  data?: T;
  error?: string;
}
